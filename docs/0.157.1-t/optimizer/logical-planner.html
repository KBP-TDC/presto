

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>19.1. Logical Planner &mdash; Teradata Distribution of Presto 0.157.1-t.0.2 Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/teradata.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Teradata Distribution of Presto 0.157.1-t.0.2 Documentation" href="../index.html"/>
        <link rel="up" title="19. Query Optimizer" href="../optimizer.html"/>
        <link rel="next" title="19.2. Table Statistics" href="statistics.html"/>
        <link rel="prev" title="19. Query Optimizer" href="../optimizer.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Teradata Distribution of Presto
          

          
          </a>

          
            
            
              <div class="version">
                0.157.1-t.0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system-requirements.html">2. System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">3. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sandbox-vms.html">4. Presto Installation on a Sandbox VM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-installation-cluster-manual.html">5. Presto Server Installation on a Cluster (Presto Admin and RPMs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-installation-aws-emr-manual.html">6. Presto Server Installation on an AWS EMR (Presto Admin and RPMs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-installation-other.html">7. Alternative Installation Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">8. Presto Client Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/presto-admin/user-guide.html">9. Presto Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">10. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">11. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../querygrid.html">12. Teradata QueryGrid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">13. Teradata Supported Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community_connector.html">14. Community Supported Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">15. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">16. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">17. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">18. Migration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../optimizer.html">19. Query Optimizer</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">19.1. Logical Planner</a></li>
<li class="toctree-l2"><a class="reference internal" href="statistics.html">19.2. Table Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="cost-in-explain.html">19.3. Cost in EXPLAIN</a></li>
<li class="toctree-l2"><a class="reference internal" href="join-distribution-type.html">19.4. Repartitioned and Replicated Joins</a></li>
<li class="toctree-l2"><a class="reference internal" href="reorder-joins.html">19.5. Join Reordering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">20. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">21. Older Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">22. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Teradata Distribution of Presto</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../optimizer.html">19. Query Optimizer</a> &raquo;</li>
      
    <li>19.1. Logical Planner</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/optimizer/logical-planner.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="logical-planner">
<h1>19.1. Logical Planner</h1>
<p>Presto currently has a rule based optimizer. A given SQL query goes through syntactic
analysis, semantic analysis, logical planning, physical planning and then execution.
Syntactic analysis, or parsing, is used to break down the query into its component structures
and check that the query conforms to the syntactic rules of SQL. The next step is semantic analysis,
which gathers the semantic information from the query that is necessary for planning. It deals
with things like type checking and verifying that the column names used in the query exist for a given table.
The logical planner then takes this syntactic and semantic information for a query and using metadata
and session information creates a base logical plan.</p>
<p>Consider this example:</p>
<div class="highlight-sql"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">nationkey</span> <span class="k">FROM</span> <span class="n">nation</span> <span class="k">JOIN</span> <span class="n">region</span> <span class="k">ON</span> <span class="n">nation</span><span class="p">.</span><span class="n">regionkey</span> <span class="o">=</span> <span class="n">region</span><span class="p">.</span><span class="n">regionkey</span> <span class="k">WHERE</span> <span class="n">nationkey</span> <span class="o">&gt;</span> <span class="mi">9</span>
</pre></div>
</div>
<p>For this query Presto will generate a logical base plan:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>        ProjectNode
            |
        FilterNode
            |
        JoinNode
           /   \
ProjectNode     ProjectNode
    |               |
TableScanNode   TableScanNode
(nation)        (region)
</pre></div>
</div>
<p>The base logical plan is then optimized using a list of optimizer transformation rules like
predicate push down or pruning of unused columns to get the final logical plan. For example the
optimization predicate push down ensures that the predicates are applied as early in the plan
as possible to reduce the amount of data that has to be processed. In the given query, the filter
on nationkey column will be pushed below the <cite>JoinNode</cite> and the <cite>ProjectNode</cite> towards the <cite>TableScanNode</cite>
for nation table and the transformed plan will look like this:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>        ProjectNode
            |
        JoinNode
           /   \
ProjectNode     ProjectNode
    |               |
FilterNode      TableScanNode
    |           (region)
TableScanNode
(nation)
</pre></div>
</div>
<p>The final optimized logical plan is then fragmented into sub-plans during physical planning. These fragments
are shipped for execution to distributed nodes.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="statistics.html" class="btn btn-neutral float-right" title="19.2. Table Statistics" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../optimizer.html" class="btn btn-neutral" title="19. Query Optimizer" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.157.1-t.0.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>