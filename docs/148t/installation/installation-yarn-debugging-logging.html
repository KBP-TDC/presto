

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Debugging and Logging for a YARN-Based Cluster &mdash; Teradata Distribution of Presto 0.148-t.1 Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/teradata.css" type="text/css" />
  

  

  
    <link rel="top" title="Teradata Distribution of Presto 0.148-t.1 Documentation" href="../index.html"/>
        <link rel="up" title="YARN Integration" href="../yarn.html"/>
        <link rel="next" title="Developer Guide" href="../develop.html"/>
        <link rel="prev" title="Advanced Configuration Options for YARN-Based Clusters" href="installation-yarn-configuration-options-advanced.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Teradata Distribution of Presto
          

          
          </a>

          
            
            
              <div class="version">
                0.148-t.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system-requirements.html">2. System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">3. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sandbox-vms.html">4. Presto Installation on a Sandbox VM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-installation-cluster-automated.html">5. Presto Server Installation on a Cluster (Ambari)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-installation-cluster-manual.html">6. Presto Server Installation on a Cluster (Presto Admin and RPMs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-installation-aws-emr-manual.html">7. Presto Server Installation on an AWS EMR (Presto Admin and RPMs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="presto-admin/user-guide.html">8. Presto Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">9. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">11. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">12. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">13. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">14. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">15. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">16. Release Notes</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/cassandra.html">Cassandra Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/kafka.html">Kafka Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/kafka-tutorial.html">Kafka Connector Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/localfile.html">Local File Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/mongodb.html">MongoDB Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/redis.html">Redis Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-ambari.html">Automated Installation on a Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-presto-admin.html">Manual Installation on a Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-yarn-automated.html">Automated Installation on a YARN-Based Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-yarn-manual.html">Manual Installation on a YARN-Based Cluster</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../yarn.html">YARN Integration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation-yarn-directory-structure.html">Presto Installation Directory Structure on YARN-Based Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation-yarn-configuration-options.html">Presto Configuration Options for YARN-Based Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation-yarn-configuration-options-advanced.html">Advanced Configuration Options for YARN-Based Clusters</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Debugging and Logging for a YARN-Based Cluster</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Teradata Distribution of Presto</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../hidden.html">&lt;no title&gt;</a> &raquo;</li>
      
        <li><a href="../yarn.html">YARN Integration</a> &raquo;</li>
      
    <li>Debugging and Logging for a YARN-Based Cluster</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/installation/installation-yarn-debugging-logging.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="debugging-and-logging-for-a-yarn-based-cluster">
<h1>Debugging and Logging for a YARN-Based Cluster</h1>
<ul class="simple">
<li>Once the YARN application is launched, you can monitor the status at
YARN ResourceManager WebUI.</li>
<li>A successfully launched application will be in <code class="docutils literal"><span class="pre">RUNNING</span></code> state. The
YARN ApplicationMaster UI (eg:
<code class="docutils literal"><span class="pre">http://master:8088/cluster/app/application_&lt;id&gt;</span></code>) will show
slider-appmaster, COORDINATOR and WORKER components and the
associated containers running based on your configuration. You can
also use Slider cli script to check <a class="reference external" href="#check-the-status">status</a>.</li>
<li>Slider retries to launch Presto in case of failure in the same YARN application.
The YARN application will be still in <code class="docutils literal"><span class="pre">RUNNING</span></code> state during this retry phase.
It ultimately kills the job after 5 unsuccessful retrials.</li>
<li>If you have used <a class="reference external" href="#using-yarn-label">labels</a> your COORDINATOR and WORKER
components will be running on nodes which were &#8216;labeled&#8217;.</li>
<li>If you have not used labels, then you can check the status either at
the YARN ResourceManager (eg:
<code class="docutils literal"><span class="pre">http://master:8088/cluster/app/application_&lt;id&gt;</span></code>) or you can use
<a class="reference external" href="#check-the-status">status</a> to get the &#8220;live&#8221; containers, and thus get the
node hosting the Presto components.</li>
<li>If Presto is up and running, then a <code class="docutils literal"><span class="pre">pgrep</span></code> of PrestoServer on your
NodeManager nodes will give you the process details. This should also
give the directory Presto is installed and the configuration files
used by Presto.</li>
<li>If the YARN application has failed to launch Presto, then you may want to
take a look at the slider logs created under YARN log directory for the
corresponding application. It is recommended that log aggregation of YARN application log
files be enabled in YARN, using
<code class="docutils literal"><span class="pre">yarn.log-aggregation-enable</span> <span class="pre">property</span></code> in your <code class="docutils literal"><span class="pre">yarn-site.xml</span></code>.
Then slider logs created during the launch of Presto-YARN will be
available locally on your nodemanager nodes (where slider-appmaster
and Presto components-COORDINATOR/WORKER are deployed) under
contanier logs directory eg:
<code class="docutils literal"><span class="pre">/var/log/hadoop-yarn/application_&lt;id&gt;/container_&lt;id&gt;/</span></code>. For any
retries attempted by Slider to launch Presto a new container will be
launched and hence you will find a new <code class="docutils literal"><span class="pre">container_&lt;id&gt;</span></code> directory.
You can look for any errors under <code class="docutils literal"><span class="pre">errors_*.txt</span></code> there, and also
there is a <code class="docutils literal"><span class="pre">slider-agent.log</span></code> file which will give you Slider
application lifetime details.
Subsequently every Slider application owner has the flexibility to
set the include and exclude patterns of file names that they intend
to aggregate, by adding the following properties in their
<code class="docutils literal"><span class="pre">resources.json</span></code>. For example, using</li>
</ul>
<p>See
<a class="reference external" href="http://slider.incubator.apache.org/docs/configuration/resources.html#logagg">http://slider.incubator.apache.org/docs/configuration/resources.html#logagg</a>
for details.</p>
<ul class="simple">
<li>If there are no errors in <code class="docutils literal"><span class="pre">slider.log</span></code> then you may want to look at Presto
logs for any errors. Presto logs will be available under the standard Presto data
directory location. By default it is <code class="docutils literal"><span class="pre">/var/lib/presto/data/var/log</span></code>
directory where <code class="docutils literal"><span class="pre">/var/lib/presto/data</span></code> is the default data
directory <code class="docutils literal"><span class="pre">site.global.data_dir</span></code> configured in Slider <code class="docutils literal"><span class="pre">appConfig.json</span></code>.
You can find both <code class="docutils literal"><span class="pre">server.log</span></code> and <code class="docutils literal"><span class="pre">http-request.log</span></code> files here. Please note that
log rotation of these Presto log files will have to be manually
enabled (for eg: using
<a class="reference external" href="http://linuxcommand.org/man_pages/logrotate8.html">http://linuxcommand.org/man_pages/logrotate8.html</a>)</li>
<li>Presto configuration files will be at <code class="docutils literal"><span class="pre">/var/lib/presto/etc</span></code>
directory if you are using the default <code class="docutils literal"><span class="pre">appConfig.json</span></code> property
<code class="docutils literal"><span class="pre">site.global.config_dir</span></code>. The configuration files here will be
generated by Slider and overwritten for every application restart.
These files should NOT be modified manually.</li>
</ul>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../develop.html" class="btn btn-neutral float-right" title="Developer Guide" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation-yarn-configuration-options-advanced.html" class="btn btn-neutral" title="Advanced Configuration Options for YARN-Based Clusters" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.148-t.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>